webpackJsonp([9],{Q0Ir:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),o=a("exGp"),c=a.n(o),s=a("Dd8w"),i=a.n(s),l=a("NYxO"),u={components:{UploadImages:a("J68u").a},computed:i()({},Object(l.d)({categoryList:function(e){return e.category.categoryList}})),data:function(){return{upload:{},category:{name:"",icon:"",parent_id:0,z_index:10},id:this.$route.params.id,ruleValidate:{name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}]}}},created:function(){this.getCategory()},methods:i()({},Object(l.b)({getCategoryDetail:"category/getCategoryDetail",updateCategory:"category/updateCategory"}),{getCategory:function(){var e=this;return c()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getCategoryDetail(e.id);case 3:e.category=t.sent,e.uploadToken.url=e.category.icon,e.$Message.success("获取分类详情成功"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.$Message.success("获取分类详情失败");case 11:case"end":return t.stop()}},t,e,[[0,8]])}))()},completeUpload:function(e){this.upload=e,this.category.icon=e.url},handleSubmit:function(e){var t,a=this;this.$refs[e].validate((t=c()(n.a.mark(function e(t){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}return e.prev=1,e.next=4,a.updateCategory(a.category);case 4:a.$Message.success("更新分类成功"),window.location.href="/category/list",e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),a.$Message.error("更新分类失败");case 12:e.next=15;break;case 14:a.$Message.error("Fail!");case 15:case"end":return e.stop()}},e,a,[[1,8]])})),function(e){return t.apply(this,arguments)}))},handleReset:function(e){this.$refs[e].resetFields()}})},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{ref:"category",attrs:{model:e.category,rules:e.ruleValidate}},[a("FormItem",{attrs:{label:"分类名称",prop:"name"}},[a("Input",{attrs:{placeholder:"category name"},model:{value:e.category.name,callback:function(t){e.$set(e.category,"name",t)},expression:"category.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"分类icon图标",prop:"name"}},[a("upload-images",{on:{completeUpload:e.completeUpload}}),e._v(" "),e.uploadToken?a("div",[a("img",{attrs:{src:e.uploadToken.url,alt:"img"}})]):e._e()],1),e._v(" "),a("FormItem",{attrs:{label:"父级分类",prop:"category"}},[e.categoryList.length>0?a("Select",{staticStyle:{position:"relative","z-index":"9999"},attrs:{placeholder:"Select category"},model:{value:e.category.parent_id,callback:function(t){e.$set(e.category,"parent_id",t)},expression:"category.parent_id"}},e._l(e.categoryList,function(t, r){return a("Option",{key:r,attrs:{value:t.id}},[e._v("\n        "+e._s(t.name)+"\n      ")])})):e._e()],1),e._v(" "),a("FormItem",{attrs:{label:"层级",prop:"name"}},[a("Input",{attrs:{placeholder:"层级"},model:{value:e.category.z_index,callback:function(t){e.$set(e.category,"z_index",t)},expression:"category.z_index"}})],1),e._v(" "),a("FormItem",[a("Button",{on:{click:function(t){e.handleReset("category")}}},[e._v("重置")]),e._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("category")}}},[e._v("更新")])],1)],1)},staticRenderFns:[]},d=a("VU/8")(u,p,!1,null,null,null);t.default=d.exports}});
//# sourceMappingURL=9.baa767269d4664ad2cf9.js.map
